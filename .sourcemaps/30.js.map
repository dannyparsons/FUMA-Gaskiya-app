{"version":3,"sources":["../../src/pages/security/profile/modifier-profile/modifier-profile.ts","../../src/pages/security/profile/modifier-profile/modifier-profile.module.ts"],"names":[],"mappings":"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","file":"30.js","sourcesContent":["import { Component } from '@angular/core';\nimport { NavController, NavParams, LoadingController, IonicPage, ToastController } from 'ionic-angular';\nimport { Validators, FormBuilder } from '@angular/forms';\nimport { PouchdbProvider } from '../../../../providers/pouchdb-provider';\n//import { ProfileUserPage } from '../../profile/profile-user';\nimport { TranslateService } from '@ngx-translate/core';\nimport { global } from '../../../../global-variables/variable';\nimport { Storage } from '@ionic/storage';\n\n/*\n  Generated class for the ModifierProfile page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n@IonicPage()\n@Component({\n  selector: 'page-modifier-profile',\n  templateUrl: 'modifier-profile.html'\n})\nexport class ModifierProfilePage {\n  user: any;\n  registerForm: any;\n  l: any = global.langue;\n\n  constructor(public translate: TranslateService, public navCtrl: NavController, public toastCtl: ToastController, public storage: Storage, public navParams: NavParams, public formBuilder: FormBuilder, public loadingCtl: LoadingController, public gestionService: PouchdbProvider) {\n    this.translate.setDefaultLang(global.langue);\n    this.user = this.navParams.data.user;\n\n    this.registerForm = this.formBuilder.group({\n        nom: [this.user.nom],\n        //username: ['', Validators.required],\n        email: [this.user.email],\n        //mdpass: ['', Validators.required],\n        //confmdpass: ['', Validators.required],\n        date: [this.user.date, Validators.required],\n        sex: [this.user.sex, Validators.required],\n    })\n  }\n\n  afficheMsg(msg: string){\n    let toast = this.toastCtl.create({\n      message: msg,\n      position: 'top',\n      duration: 3000\n    });\n\n    toast.present();\n  }\n\n  ionViewWillEnter() {\n    this.translate.use(global.langue);\n    console.log('ionViewDidLoad ModifierProfilePage');\n  }\n\n  modifier(){\n    let newUserInfo = this.registerForm.value;\n    this.gestionService.remoteSaved.putUser(this.user.name, {\n      metadata : {\n        email : newUserInfo.email,\n        date : newUserInfo.date,\n        sex : newUserInfo.sex,\n        nom: newUserInfo.nom\n      }\n    }, (err, response) => {\n      if(err){\n        alert('Erreur');\n      }else if(response){\n        this.gestionService.remoteSaved.getUser(this.user.name, (err, us) => {\n          if (!err) {\n            global.info_user = us;\n            this.storage.set('info_user', us);\n            this.afficheMsg('Profile mis à jour avec succès!')\n            this.navCtrl.pop();\n          }else{\n            this.afficheMsg('Profile mis à jour avec succès!')\n            this.navCtrl.pop();\n          }\n        });\n      }\n      \n    });\n  }\n \n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/security/profile/modifier-profile/modifier-profile.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ModifierProfilePage } from './modifier-profile';\r\n//import { TranslationModule } from '../../../../translation/translate.module'\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  declarations: [ModifierProfilePage],\r\n  imports: [TranslateModule, IonicPageModule.forChild(ModifierProfilePage)],\r\n  exports: [ModifierProfilePage]\r\n})\r\nexport class ModifierProfilePageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/security/profile/modifier-profile/modifier-profile.module.ts"],"sourceRoot":""}