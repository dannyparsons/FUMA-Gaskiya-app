{"version":3,"sources":["../../src/pages/culture/modifier-culture/modifier-culture.ts","../../src/pages/culture/modifier-culture/modifier-culture.module.ts"],"names":[],"mappings":"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","file":"58.js","sourcesContent":["import { Component } from '@angular/core';\nimport { NavController, NavParams, ToastController, IonicPage } from 'ionic-angular';\nimport { Validators, FormBuilder } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Storage } from '@ionic/storage';\nimport { PouchdbProvider } from '../../../providers/pouchdb-provider';\n\n\n/*\n  Generated class for the ModifierCulture page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n\n@IonicPage()\n@Component({\n  selector: 'page-modifier-culture',\n  templateUrl: 'modifier-culture.html'\n})\nexport class ModifierCulturePage {\n\n  cultureForm: any;\n  allCulture: any = [];\n  culture: any;\n  grandCulture: any;\n\n\n constructor(public navCtrl: NavController, public navParams: NavParams, public toastCtl: ToastController, public servicePouchdb: PouchdbProvider, public formBuilder: FormBuilder, public storage: Storage) {\n    \n    this.grandCulture = this.navParams.data.culture\n    this.culture = this.grandCulture.data\n    this.cultureForm = this.formBuilder.group({\n     // _id:[''],\n      nom: [this.culture.nom, Validators.required],\n    });\n    \n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ModifierCulturePage');\n  }\n\n  ionViewDidEnter() {\n    this.servicePouchdb.getPlageDocs('fuma:culture','fuma:culture:\\uffff').then((c) => {\n        this.allCulture = c;\n\n      }, err => console.log(err));      \n  }\n\n  verifierUniqueNon(culture, id){\n  \n    let res = 1;\n    this.allCulture.forEach((c, index) => {\n      if(((id !== c._id) && (culture.nom.toString().toLowerCase() === c.data.nom.toString().toLowerCase()))){\n        res = 0;\n      }\n    });\n\n    return res;\n  }\n\n   modifier(){\n      //  let date = new Date();\n    let culture = this.cultureForm.value;\n    if(this.verifierUniqueNon(culture, this.grandCulture._id) === 0){\n      alert('Le nom de la culture doit être unique!');\n    }else{\n\n      culture.nom = culture.nom.toString().toUpperCase();\n      this.culture.nom = culture.nom;\n      \n        this.grandCulture.data = this.culture;\n        this.servicePouchdb.updateDoc(this.grandCulture);\n      \n        let toast = this.toastCtl.create({\n          message: 'Culture bien sauvegardée!',\n          position: 'top',\n          duration: 3000\n        });\n\n        toast.present();\n        this.navCtrl.pop();\n    }\n  }\n\n  annuler(){\n    this.navCtrl.pop();\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/culture/modifier-culture/modifier-culture.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ModifierCulturePage } from './modifier-culture';\r\n\r\n@NgModule({\r\n  declarations: [ModifierCulturePage],\r\n  imports: [IonicPageModule.forChild(ModifierCulturePage)],\r\n  exports: [ModifierCulturePage]\r\n})\r\nexport class ModifierCulturePageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/culture/modifier-culture/modifier-culture.module.ts"],"sourceRoot":""}