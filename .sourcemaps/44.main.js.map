{"version":3,"sources":["../../src/pages/localite/ajouter-region/ajouter-region.module.ts","../../src/pages/localite/ajouter-region/ajouter-region.ts"],"names":[],"mappings":"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","file":"44.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AjouterRegionPage } from './ajouter-region';\n\n@NgModule({\n  declarations: [\n    AjouterRegionPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AjouterRegionPage),\n  ],\n  exports: [\n    AjouterRegionPage\n  ]\n})\nexport class AjouterRegionPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/localite/ajouter-region/ajouter-region.module.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, IonicPage, ToastController, ViewController, MenuController, Events } from 'ionic-angular';\nimport { Validators, FormBuilder } from '@angular/forms';\nimport { PouchdbProvider } from '../../../providers/pouchdb-provider';\n/**\n * Generated class for the AjouterRegionPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-ajouter-region',\n  templateUrl: 'ajouter-region.html',\n})\nexport class AjouterRegionPage {\n  regionForm: any;\n  region: any;\n  allRegion: any = [];\n  nom_pays: any;\n  id_pays: any;\n  id: any = '';\n  nom: any = '';\n \n  constructor(public navCtrl: NavController, public menuCtl: MenuController, public viewCtrl: ViewController, public navParams: NavParams,public toastCtl: ToastController, public servicePouchdb: PouchdbProvider, public formBuilder: FormBuilder) {\n    this.id_pays = this.navParams.data.id_pays;\n    this.nom_pays = this.navParams.data.nom_pays;\n    \n    this.regionForm = this.formBuilder.group({\n      id:['', Validators.required],\n      nom:['', Validators.required],\n      id_pays:[this.id_pays, Validators.required],\n      nom_pays:[this.nom_pays],\n    });\n  }\n\n  ionViewDidEnter() {\n     this.servicePouchdb.getDocById('region').then((region) => {\n       this.allRegion = region.data;\n       this.region = region;\n       //alert(this.pays._id)\n     })\n  }\n\n  //fait la conbinaison de caractere de gauche vers la droite en variant la taille a la recherche d'un code disponible\n  genererID(){\n    \n    let nom = this.nom;\n     nom = nom.replace(' ' || '  ' || '    ' || '     ' || '      ' , '');\n     let taille_nom = nom.length;\n     let an = nom;\n    //taille initiale: deux aractères\n    let taille_code = 2;\n    let code: string = '';\n    this.id = code.toUpperCase()\n    let p = 0;\n    let last_position = 0;\n    let trouve: boolean;\n\n    if(taille_nom >= 2){\n      while(taille_code <= taille_nom){\n        last_position = taille_code - 1;\n        trouve  = false;\n        code = '';\n        for(let i = 0; i < taille_code; i++){\n          code += nom.charAt(i).toString() ;\n        }\n\n        do{\n            code = code.substr(0, code.length - 1);\n            code += nom.charAt(last_position).toString() ;\n            p = 0;\n            for(let pos=0; pos < this.allRegion.length; pos++){\n              let rg = this.allRegion[pos];\n              if(rg.id === code.toUpperCase()){\n                trouve = true;\n                break ;\n              }else{\n                trouve = false;\n              }\n            }\n            \n            last_position++;\n\n          }while(trouve && last_position < taille_nom);\n          //\n          if(last_position === taille_nom && trouve){\n            //non disponible, augmenter la taille du code\n            taille_code++;\n        \n            //au cas ou on teste toutes les combinaisons, sant trouver de combinaison disponible, on ajoute des chiffre\n            if(taille_code > taille_nom){\n              //non disponible, augmenter la taille et utiliser des chiffres\n              taille_code = 3;\n              nom = an + '123456789'.toString();\n              taille_nom = nom.length;\n            }\n          }else{\n              this.id = code.toUpperCase();\n              break;\n            \n          }\n      }\n      \n    }\n    \n  }\n\n   verifierUniqueNon(region){\n    let res = 1;\n    this.allRegion.forEach((p, index) => {\n      if((region.nom.toString().toUpperCase() === p.nom.toString().toUpperCase())){\n        res = 0;\n      }\n    });\n\n    return res;\n  }\n\n\n  ajouter(){\n    \n    let region = this.regionForm.value;\n  //  if(this.verifierUniqueNon(region) === 0){\n    //  alert('Les noms des régions doivent être uniques!');\n    //}else{\n      let data = [];\n      data = this.region.data;\n      data.push(region);\n      this.region.data = data;\n      this.servicePouchdb.updateLocalite(this.region);\n      let toast = this.toastCtl.create({\n        message: 'Région bien enregistré!',\n        position: 'top',\n        duration: 3000\n      });\n\n      toast.present();\n      this.viewCtrl.dismiss();\n  //  }\n  } \n\n  annuler(){\n     this.viewCtrl.dismiss();\n  }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/localite/ajouter-region/ajouter-region.ts"],"sourceRoot":""}