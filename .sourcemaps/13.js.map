{"version":3,"sources":["../../src/pages/variete/modifier-variete/modifier-variete.ts","../../src/pages/variete/modifier-variete/modifier-variete.module.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAA0C;AACiD;AAClC;AAEhB;AAC6B;AAEtE;;;;;EAKE;AAMF,IAAa,mBAAmB;IAS9B,6BAAmB,OAAsB,EAAS,SAAoB,EAAS,QAAyB,EAAS,cAA+B,EAAS,QAAyB,EAAS,WAAwB,EAAS,OAAgB;QAA5O,iBAqBC;QArBkB,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,aAAQ,GAAR,QAAQ,CAAiB;QAAS,mBAAc,GAAd,cAAc,CAAiB;QAAS,aAAQ,GAAR,QAAQ,CAAiB;QAAS,gBAAW,GAAX,WAAW,CAAa;QAAS,YAAO,GAAP,OAAO,CAAS;QAP5O,aAAQ,GAAQ,EAAE,CAAC;QACnB,eAAU,GAAQ,EAAE,CAAC;QAGrB,SAAI,GAAQ,EAAE,CAAC;QACf,gBAAW,GAAQ,EAAE,CAAC;QAIpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC;QAChD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;QACtC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,cAAc,EAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,UAAC,CAAC;YAC1E,KAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAEpB,CAAC,EAAE,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAC;QAE9B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;YACzC,YAAY;YACX,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,kEAAU,CAAC,QAAQ,CAAC;YAC5C,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,kEAAU,CAAC,QAAQ,CAAC;YAC9C,OAAO,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACpD,YAAY,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;YACzC,cAAc,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC;YAC7C,YAAY,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;YACzC,oBAAoB;YACpB,WAAW,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;SACxC,CAAC,CAAC;IAEL,CAAC;IAED,iCAAG,GAAH,UAAI,GAAgB;QAAhB,8BAAgB;QAClB,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC/B,OAAO,EAAE,GAAG;YACZ,QAAQ,EAAE,KAAK;YACf,QAAQ,EAAE,IAAI;SACf,CAAC,CAAC;QAEH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,6CAAe,GAAf;QAAA,iBAMC;QAJG,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,cAAc,EAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,UAAC,CAAC;YAC5E,KAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QAEtB,CAAC,EAAE,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAC;IAChC,CAAC;IAGD,gDAAkB,GAAlB,UAAmB,OAAO,EAAE,EAAE;QAE5B,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,KAAK;YAC/B,EAAE,EAAC,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC,EAAC;gBACrG,GAAG,GAAG,CAAC,CAAC;YACV,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAGA,sCAAQ,GAAR;QACG,0BAA0B;QAC5B,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;QACrC,EAAE,EAAC,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAC;YAChE,KAAK,CAAC,yCAAyC,CAAC,CAAC;QACnD,CAAC;QAAA,IAAI,EAAC;YAEJ,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC;YAC/B,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;YACjC,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;YACvC,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC;YACjD,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC;YACrD,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC;YACjD,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;YAE7C,IAAI,CAAC,YAAY,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;YACtC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAEjD,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;gBAC/B,OAAO,EAAE,2BAA2B;gBACpC,QAAQ,EAAE,KAAK;gBACf,QAAQ,EAAE,IAAI;aACf,CAAC,CAAC;YAEH,KAAK,CAAC,OAAO,EAAE,CAAC;YAChB,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;QACvB,CAAC;IACH,CAAC;IAED,qCAAO,GAAP;QACE,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;IACrB,CAAC;IAGH,0BAAC;AAAD,CAAC;AAlGY,mBAAmB;IAJ/B,wEAAS,CAAC;QACT,QAAQ,EAAE,uBAAuB;OACG;KACrC,CAAC;wBAU4O;AAyF7O;SAlGY,mBAAmB,gB;;;;;;;;;;;;;;;;;;;AClBS;AACO;AACS;AAOzD,IAAa,yBAAyB;IAAtC;IAAyC,CAAC;IAAD,gCAAC;AAAD,CAAC;AAA7B,yBAAyB;IALrC,uEAAQ,CAAC;QACR,YAAY,EAAE,CAAC,8EAAmB,CAAC;QACnC,OAAO,EAAE,CAAC,sEAAe,CAAC,QAAQ,CAAC,8EAAmB,CAAC,CAAC;QACxD,OAAO,EAAE,CAAC,8EAAmB,CAAC;KAC/B,CAAC;GACW,yBAAyB,CAAI;AAAJ","file":"13.js","sourcesContent":["import { Component } from '@angular/core';\nimport { NavController, NavParams, ToastController, AlertController, IonicPage } from 'ionic-angular';\nimport { Validators, FormBuilder } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Storage } from '@ionic/storage';\nimport { PouchdbProvider } from '../../../providers/pouchdb-provider';\n\n/*\n  Generated class for the ModifierVariete page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n@IonicPage()\n@Component({\n  selector: 'page-modifier-variete',\n  templateUrl: 'modifier-variete.html'\n})\nexport class ModifierVarietePage {\nvarieteForm: any;\n  cultures: any = [];\n  allVariete: any = [];  \n  grandVariete: any;\n  variete: any;\n  imei: any = '';\n  phonenumber: any = '';\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public toastCtl: ToastController, public servicePouchdb: PouchdbProvider, public alertCtl: AlertController, public formBuilder: FormBuilder, public storage: Storage) {\n\n    this.grandVariete = this.navParams.data.variete;\n    this.variete = this.grandVariete.data;\n    this.servicePouchdb.getPlageDocs('fuma:culture','fuma:culture:\\uffff').then((c) => {\n        this.cultures = c;\n\n      }, err => console.log(err)); \n\n    this.varieteForm = this.formBuilder.group({\n     // _id:[''],\n      nom: [this.variete.nom, Validators.required],\n      code: [this.variete.code, Validators.required],\n      culture: [this.variete.culture, Validators.required],\n      pays_origine: [this.variete.pays_origine],\n      region_origine: [this.variete.region_origine],\n      longeur_tige: [this.variete.longeur_tige],\n      //longeur_epi: [''],\n      description: [this.variete.description],\n    });\n    \n  }\n\n  msg(msg: string = ''){\n    let toast = this.toastCtl.create({\n      message: msg,\n      position: 'top',\n      duration: 3000\n    });\n\n    toast.present();\n  }\n\n  ionViewDidEnter() {\n\n      this.servicePouchdb.getPlageDocs('fuma:variete','fuma:variete:\\uffff').then((v) => {\n        this.allVariete = v;\n\n      }, err => console.log(err));      \n  }\n\n\n  verifierUniqueCode(variete, id){\n  \n    let res = 1;\n    this.allVariete.forEach((c, index) => {\n      if((id !== c._id) && (variete.code.toString().toLowerCase() === c.data.code.toString().toLowerCase())){\n        res = 0;\n      }\n    });\n\n    return res;\n  }\n\n\n   modifier(){\n      //  let date = new Date();\n    let variete = this.varieteForm.value;\n    if(this.verifierUniqueCode(variete, this.grandVariete._id) === 0){\n      alert('Le code de la variété doit être unique!');\n    }else{\n\n      this.variete.nom = variete.nom;\n      this.variete.code = variete.code;\n      this.variete.culture = variete.culture;\n      this.variete.pays_origine = variete.pays_origine;\n      this.variete.region_origine = variete.region_origine;\n      this.variete.longeur_tige = variete.longeur_tige;\n      this.variete.description = variete.description;\n      \n        this.grandVariete.data = this.variete;\n        this.servicePouchdb.updateDoc(this.grandVariete);\n      \n        let toast = this.toastCtl.create({\n          message: 'Variété bien sauvegardée!',\n          position: 'top',\n          duration: 3000\n        });\n\n        toast.present();\n        this.navCtrl.pop();\n    }\n  }\n\n  annuler(){\n    this.navCtrl.pop();\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/variete/modifier-variete/modifier-variete.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ModifierVarietePage } from './modifier-variete';\r\n\r\n@NgModule({\r\n  declarations: [ModifierVarietePage],\r\n  imports: [IonicPageModule.forChild(ModifierVarietePage)],\r\n  exports: [ModifierVarietePage]\r\n})\r\nexport class ModifierVarietePageModule { }\r\n \n\n\n// WEBPACK FOOTER //\n// ./src/pages/variete/modifier-variete/modifier-variete.module.ts"],"sourceRoot":""}